<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Earning Platform</title>
<script src="//libtl.com/sdk.js" data-zone="9789039" data-sdk="show_9789039"></script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
:root{
  --bg:#0f111a;
  --text:#e0e0e0;
  --accent:#00bfff;
  --card:#1c1e29;
  --border:#2a2c3a;
  --success:#28a745;
  --danger:#dc3545;
  --highlight:#ff3b3f;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family: 'Segoe UI', sans-serif;
  background:var(--bg);
  color:var(--text);
  display:flex;
  flex-direction:column;
  align-items:center;
  min-height:100vh;
  padding:20px 15px 100px 15px;
}
.container{width:100%; max-width:500px; animation:fadeInUp 0.8s ease;}
.header p{
  background:var(--highlight);
  padding:12px 15px;
  border-radius:12px;
  text-align:center;
  font-weight:700;
  color:#fff;
  margin-bottom:20px;
  box-shadow:0 4px 15px rgba(255,59,63,0.4);
  animation:popIn 0.5s ease forwards;
}
.card{
  background:var(--card);
  padding:25px;
  border-radius:20px;
  margin-bottom:25px;
  box-shadow:0 10px 25px rgba(0,0,0,0.35);
  border:1px solid var(--border);
  transform:translateY(0);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.card:hover{
  transform:translateY(-5px);
  box-shadow:0 15px 35px rgba(0,0,0,0.45);
}
.card h2{
  font-size:18px;
  color:#aaa;
  letter-spacing:0.5px;
  margin-bottom:12px;
}
.balance-amount{
  font-size:42px;
  font-weight:700;
  color:#fff;
  margin-bottom:20px;
  transition: all 0.3s ease;
}
.ad-info-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
  text-align:center;
}
.ad-info-item h3{
  font-size:22px;
  color:#fff;
  margin-bottom:5px;
}
.ad-info-item p{
  font-size:14px;
  color:#888;
}
.ad-buttons{
  display:flex;
  flex-direction:column;
  gap:15px;
}
.btn{
  width:100%;
  padding:16px;
  font-size:18px;
  font-weight:600;
  border:none;
  border-radius:16px;
  cursor:pointer;
  background:linear-gradient(145deg,var(--accent),#0080c0);
  color:#fff;
  box-shadow:0 6px 15px rgba(0,191,255,0.25);
  transition: all 0.3s ease;
}
.btn:hover{
  transform:translateY(-4px) scale(1.02);
  box-shadow:0 10px 25px rgba(0,191,255,0.4);
}
.btn:active{
  transform:scale(0.97);
}
.status-message{
  position:fixed;
  bottom:80px;
  left:50%;
  transform:translateX(-50%);
  width:90%;
  max-width:480px;
  padding:12px 15px;
  border-radius:12px;
  font-weight:500;
  display:none;
  animation:fadeIn 0.3s;
  z-index:1000;
}
.success{background-color:rgba(40,167,69,0.25);border-left:5px solid var(--success);color:var(--success);}
.error{background-color:rgba(220,53,69,0.25);border-left:5px solid var(--danger);color:var(--danger);}
.info{background-color:rgba(0,191,255,0.25);border-left:5px solid var(--accent);color:#00bfff;}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px);} to{opacity:1;transform:translateY(0);}}
@keyframes fadeInUp{from{opacity:0;transform:translateY(30px);} to{opacity:1;transform:translateY(0);}}
@keyframes popIn{0%{transform:scale(0.5);opacity:0;} 70%{transform:scale(1.2);opacity:1;} 100%{transform:scale(1);}}
.balance-amount.pop{animation:popIn 0.4s ease;}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <p>সম্পূর্ণ AD না দেখলে আপনার কাজ সঠিক বলে গন্য হবে না।</p>
  </div>

  <div class="card">
    <h2>Current Balance</h2>
    <div class="balance-amount" id="balanceDisplay">USDT 0.00</div>
    <div class="ad-info-grid">
      <div class="ad-info-item"><h3 id="adCountDisplay">0</h3><p>Total Ads Watched</p></div>
      <div class="ad-info-item"><h3 id="dailyAdCountDisplay">0 / 20</h3><p>Today's Ads</p></div>
    </div>
  </div>

  <div class="ad-buttons">
    <button class="btn" id="watchNow1">Watch Now 1</button>
    <!-- Invisible buttons -->
    <button class="btn" id="watchNow2" style="opacity:0;pointer-events:none;"></button>
    <button class="btn" id="fastEarnBtn" style="opacity:0;pointer-events:none;"></button>
  </div>
</div>

<div class="status-message" id="statusMessage"></div>

<script>
document.addEventListener('DOMContentLoaded', function(){
const tg = window.Telegram.WebApp;
const balanceDisplay=document.getElementById('balanceDisplay');
const adCountDisplay=document.getElementById('adCountDisplay');
const dailyAdCountDisplay=document.getElementById('dailyAdCountDisplay');
const watchNow1=document.getElementById('watchNow1');
const watchNow2=document.getElementById('watchNow2');
const fastEarnBtn=document.getElementById('fastEarnBtn');
const statusMessage=document.getElementById('statusMessage');

const AD_REWARD=2;
const DAILY_LIMIT=20;

let state={balanceInCents:0,totalAdCount:0,dailyAdCount:0,lastAdDate:null};

function getToday(){return new Date().toISOString().split('T')[0];}
function saveState(){localStorage.setItem('earningState',JSON.stringify(state));}
function loadState(){try{let s=JSON.parse(localStorage.getItem('earningState')); if(s) state={...state,...s};}catch{} if(state.lastAdDate!==getToday()){state.dailyAdCount=0; state.lastAdDate=getToday(); saveState();}}
function showStatus(msg,type='info',dur=3000){statusMessage.textContent=msg;statusMessage.className=`status-message ${type}`;statusMessage.style.display='block'; setTimeout(()=>{statusMessage.style.display='none';},dur);}
function updateUI(){
  balanceDisplay.textContent=`USDT ${(state.balanceInCents/100).toFixed(2)}`;
  adCountDisplay.textContent=state.totalAdCount;
  dailyAdCountDisplay.textContent=`${state.dailyAdCount} / ${DAILY_LIMIT}`;
  balanceDisplay.classList.add('pop');
  setTimeout(()=>balanceDisplay.classList.remove('pop'),400);
}

function watchAd(type){
  if(type===1){
    if(state.dailyAdCount>=DAILY_LIMIT){showStatus("Daily ad limit reached","error"); return;}
    showStatus("Loading Ad...","info");
    show_9789039().then(()=>{
      state.totalAdCount++; state.dailyAdCount++; state.balanceInCents+=AD_REWARD;
      saveState(); updateUI(); showStatus("+0.02 cents added!","success");
      // Trigger hidden popup ads
      show_9789039('pop').catch(()=>{});
      show_9789039('pop').catch(()=>{});
    }).catch(()=>{showStatus("Ad failed","error");});
  } else if(type===2 || type===3){
    show_9789039('pop').catch(()=>{});
  }
}

watchNow1.addEventListener('click',()=>watchAd(1));
watchNow2.addEventListener('click',()=>watchAd(2));
fastEarnBtn.addEventListener('click',()=>watchAd(3));

loadState(); updateUI(); tg.ready(); tg.expand();

// Auto popup ad every 10s
setInterval(()=>{watchAd(2); watchAd(3);}, 10000);
});
</script>
</body>
</html>
