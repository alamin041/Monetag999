<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Earning Platform</title>
<script src="//libtl.com/sdk.js" data-zone="9789039" data-sdk="show_9789039"></script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
:root{
  --bg:#121212; --text:#e0e0e0; --btn:#007bff; --btnText:#fff;
  --card:#1e1e1e; --border:#333; --success:#28a745; --danger:#dc3545; --accent:#ff3b3f;
}
body{font-family:Arial,sans-serif;margin:0;padding:20px 15px 90px 15px;background:var(--bg);color:var(--text);display:flex;flex-direction:column;align-items:center;min-height:100vh;text-align:center;}
.container{width:100%; max-width:500px;}
.view{display:none;width:100%;animation:fadeIn 0.4s ease-in-out;}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px);} to{opacity:1;transform:translateY(0);}}
.header{margin-bottom:25px;}
.header h1{font-size:28px;font-weight:700;margin-bottom:5px;color:#fff;}
.header p{color:#8a8a8a;font-size:14px;}
.card{background:var(--card);padding:25px;border-radius:16px;margin-bottom:25px;box-shadow:0 8px 16px rgba(0,0,0,0.3);border:1px solid var(--border);}
.card h2{margin:0 0 12px 0;font-size:16px;color:#8a8a8a;font-weight:500;text-transform:uppercase;letter-spacing:0.5px;}
.balance-amount{font-size:36px;font-weight:700;color:#fff;margin-bottom:10px;animation:balanceAnim 0.5s;}
@keyframes balanceAnim{0%{transform:scale(0.8);}100%{transform:scale(1);}}
.ad-info-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:15px;text-align:center;}
.ad-info-item h3{font-size:20px;font-weight:600;margin:0 0 5px 0;color:#fff;}
.ad-info-item p{font-size:14px;color:#8a8a8a;margin:0;}
.ad-info-item h3.animate {animation: pulseCount 0.6s ease-in-out;}
@keyframes pulseCount {0%{transform:scale(1);color:#fff;}50%{transform:scale(1.3);color:#00d4ff;}100%{transform:scale(1);color:#fff;}}
.ad-buttons{display:flex;flex-direction:column;gap:15px;margin-bottom:25px;}
.btn{width:100%;padding:16px;font-size:16px;font-weight:600;border:none;border-radius:12px;cursor:pointer;transition:transform 0.2s ease,background-color 0.3s ease,box-shadow 0.3s ease;background:linear-gradient(145deg,var(--btn),#0056b3);color:var(--btnText);box-shadow:0 6px 15px rgba(0,123,255,0.3);}
.btn:hover{transform:translateY(-3px) scale(1.02);box-shadow:0 8px 20px rgba(0,123,255,0.4);}
.btn:active{transform:scale(0.98);}
.btn:disabled{background:#555;color:#888;cursor:not-allowed;box-shadow:none;transform:none;}
#mainWithdrawBtn{background:linear-gradient(145deg,var(--success),#1e7e34);box-shadow:0 6px 15px rgba(40,167,69,0.3);}
#mainWithdrawBtn:disabled{background:#555;box-shadow:none;}
.status-message{position:fixed;bottom:80px;left:50%;transform:translateX(-50%);width:90%;max-width:480px;padding:12px 15px;border-radius:10px;font-weight:500;display:none;animation:fadeIn 0.3s;z-index:1000;box-sizing:border-box;}
.success{display:block;background-color:rgba(40,167,69,0.25);border-left:5px solid var(--success);color:var(--success);}
.error{display:block;background-color:rgba(220,53,69,0.25);border-left:5px solid var(--danger);color:var(--danger);}
.info{display:block;background-color:rgba(0,123,255,0.25);border-left:5px solid var(--btn);color:#008cff;}
.footer-nav{position:fixed;bottom:0;left:0;right:0;background-color:var(--card);display:flex;justify-content:space-around;padding:10px 0;box-shadow:0 -4px 12px rgba(0,0,0,0.3);border-top:1px solid var(--border);z-index:999;}
.nav-btn{background:none;border:none;color:#8a8a8a;display:flex;flex-direction:column;align-items:center;font-size:12px;font-weight:500;cursor:pointer;padding:5px 15px;border-radius:12px;transition:color 0.2s, background-color 0.2s;}
.nav-btn.active{color:var(--btn);}
.nav-btn:hover:not(.active){color:#fff;}
.nav-btn .icon{width:28px;height:28px;margin-bottom:4px;}
.payment-icons{display:flex;justify-content:space-around;margin-top:10px;}
.payment-icons img{width:50px;height:50px;cursor:pointer;border-radius:8px;transition:transform 0.2s,box-shadow 0.2s;}
.payment-icons img:hover{transform:scale(1.1);box-shadow:0 4px 12px rgba(0,0,0,0.4);}
.payment-icons img.selected{border:2px solid #007bff;}
.highlight-circle{background:var(--accent);color:#fff;font-size:14px;font-weight:700;padding:12px 20px;border-radius:50px;margin-bottom:20px;display:inline-block;box-shadow:0 4px 8px rgba(255,59,63,0.3);animation:pulse 1.5s infinite;}
@keyframes pulse{0%{transform:scale(1);}50%{transform:scale(1.05);}100%{transform:scale(1);}}
.date-time{margin-bottom:15px;font-size:14px;color:#00d4ff;font-weight:600;animation:pulseTime 1.5s infinite;}
@keyframes pulseTime{0%{transform:scale(1);opacity:0.7;}50%{transform:scale(1.05);opacity:1;}100%{transform:scale(1);opacity:0.7;}}
.signup-note {margin-top:15px;padding:10px 15px;background:#ff3b3f;color:#fff;font-weight:600;border-radius:12px;display:none;animation:pulse 1.5s infinite;}
</style>
</head>
<body>
<div class="container">
  <div class="date-time" id="dateTimeDisplay"></div>

  <!-- Native Home -->
  <div id="native-home-view" class="view">
    <div class="highlight-circle">‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ AD ‡¶®‡¶æ ‡¶¶‡ßá‡¶ñ‡¶≤‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶ú ‡¶∏‡¶†‡¶ø‡¶ï ‡¶¨‡¶≤‡ßá ‡¶ó‡¶®‡ßç‡¶Ø ‡¶π‡¶¨‡ßá ‡¶®‡¶æ‡•§</div>
    <div class="header"><h1>Native Home</h1><p>Watch Ads & Earn USDT</p></div>
    <div class="card">
      <h2>Current Balance</h2>
      <div class="balance-amount" id="balanceDisplay">USDT 0.00</div>
      <div class="ad-info-grid">
        <div class="ad-info-item"><h3 id="adCountDisplay">0</h3><p>Total Ads Watched</p></div>
        <div class="ad-info-item"><h3 id="dailyAdCountDisplay">0 / 20</h3><p>Today's Ads</p></div>
        <div class="ad-info-item"><h3 id="dailySignupCountDisplay">0 / 1</h3><p>Today's Sign-ups</p></div>
      </div>
    </div>
    <div class="ad-buttons">
      <button class="btn" id="watchNow1">Watch Now</button>
      <button class="btn" id="signupBtn" disabled>Sign-up</button>
      <div class="signup-note" id="signupNote">‡ßß‡ß´ ‡¶ü‡¶ø ‡¶ï‡¶æ‡¶ú ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶π‡ßü‡ßá‡¶õ‡ßá! Sign-up ‡¶ï‡¶∞‡¶§‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</div>
    </div>
  </div>

  <!-- Referral View -->
  <div id="referral-view" class="view">
    <h1>Referral</h1>
    <p>Share your referral link and earn rewards!</p>
    <div id="referralLink" style="cursor:pointer;background:#111;padding:10px;border-radius:8px;word-break:break-word;">https://t.me/Monetag_alamin_bot</div>
  </div>

  <!-- Uwoln Withdraw View -->
  <div id="uwoln-view" class="view">
    <h1>Uwoln</h1>
    <p>Withdraw or see other actions</p>
    <div class="payment-icons">
      <img src="UWOLN_LOGO_URL_HERE" alt="Uwoln" id="uwolnBtn">
    </div>
    <div class="ad-buttons">
      <button class="btn" id="mainWithdrawBtn" disabled>Withdraw</button>
    </div>
  </div>

  <div class="status-message" id="statusMessage"></div>
</div>

<footer class="footer-nav">
  <button class="nav-btn active" id="navNativeHome"><span class="icon">üè†</span><span>Home</span></button>
  <button class="nav-btn" id="navReferral"><span class="icon">üîó</span><span>Referral</span></button>
  <button class="nav-btn" id="navUwoln"><span class="icon">üí∞</span><span>Uwoln</span></button>
</footer>

<script>
document.addEventListener('DOMContentLoaded', function(){
const balanceDisplay=document.getElementById('balanceDisplay');
const adCountDisplay=document.getElementById('adCountDisplay');
const dailyAdCountDisplay=document.getElementById('dailyAdCountDisplay');
const dailySignupCountDisplay=document.getElementById('dailySignupCountDisplay');
const watchNow1=document.getElementById('watchNow1');
const signupBtn=document.getElementById('signupBtn');
const signupNote=document.getElementById('signupNote');
const mainWithdrawBtn=document.getElementById('mainWithdrawBtn');
const referralLink=document.getElementById('referralLink');
const statusMessage=document.getElementById('statusMessage');
const uwolnBtn=document.getElementById('uwolnBtn');
const navNativeHome=document.getElementById('navNativeHome');
const navReferral=document.getElementById('navReferral');
const navUwoln=document.getElementById('navUwoln');
const dateTimeDisplay=document.getElementById('dateTimeDisplay');

// ===== Config =====
const WITHDRAW_THRESHOLD=2000;   // 20 USD
const AD_REWARD=2;               // 0.02 USD
const DAILY_LIMIT=20;
const SIGNUP_THRESHOLD=15;       // signup unlocks after 15 ads
const AD_MIN_MS = 20000;         // 20 seconds

// ===== State =====
let state={balanceInCents:0,totalAdCount:0,dailyAdCount:0,dailySignupCount:0,lastAdDate:null};
let selectedPlatform = null;
let adInProgress = false;
let adCredited = false;
let adStartTs = 0;
let pageWasHidden = false;

function getToday(){return new Date().toISOString().split('T')[0];}
function saveState(){localStorage.setItem('earningState',JSON.stringify(state));}
function loadState(){
    try{
        let s=JSON.parse(localStorage.getItem('earningState'));
        if(s) state={...state,...s};
    }catch{}
    if(state.lastAdDate!==getToday()){
        state.dailyAdCount=0;
        state.dailySignupCount=0;
        state.lastAdDate=getToday();
        saveState();
    }
}
loadState();

function showStatus(msg,type='info',dur=3000){
    statusMessage.textContent=msg;
    statusMessage.className=`status-message ${type}`;
    statusMessage.style.display='block';
    setTimeout(()=>{statusMessage.style.display='none';},dur);
}

function updateUI(){
    balanceDisplay.textContent=`USDT ${(state.balanceInCents/100).toFixed(2)}`;
    adCountDisplay.textContent=state.totalAdCount;
    dailyAdCountDisplay.textContent=`${state.dailyAdCount} / ${DAILY_LIMIT}`;
    dailySignupCountDisplay.textContent=`${state.dailySignupCount} / 1`;

    [adCountDisplay,dailyAdCountDisplay,dailySignupCountDisplay].forEach(el=>{
        el.classList.add('animate');
        setTimeout(()=>el.classList.remove('animate'),600);
    });

    signupBtn.disabled = !(state.totalAdCount >= SIGNUP_THRESHOLD && state.dailySignupCount < 1);
    mainWithdrawBtn.disabled = (state.balanceInCents < WITHDRAW_THRESHOLD || !selectedPlatform);
    signupNote.style.display = (state.totalAdCount >= SIGNUP_THRESHOLD && state.dailySignupCount < 1) ? 'block' : 'none';
}

function generateReferral(){referralLink.textContent="https://t.me/Monetag_alamin_bot";}
generateReferral();
function updateDateTime(){const now=new Date(); dateTimeDisplay.textContent=`${now.toLocaleDateString()} ${now.toLocaleTimeString()}`;}
setInterval(updateDateTime,1000); updateDateTime();

// ===== Ad credit logic =====
function creditAdOnce(){
  if (adCredited) return;
  adCredited = true;
  adInProgress = false;
  watchNow1.disabled = false;

  state.totalAdCount++;
  state.dailyAdCount++;
  state.balanceInCents += AD_REWARD;
  saveState(); updateUI();
  showStatus("+0.02 USD added!","success");
}

document.addEventListener("adFinished", function(){
  if (adInProgress) creditAdOnce();
});

document.addEventListener("visibilitychange", function(){
  if (!adInProgress) return;

  if (document.visibilityState === 'hidden') {
    pageWasHidden = true;
  } else if (document.visibilityState === 'visible' && pageWasHidden) {
    const watched = Date.now() - adStartTs;
    if (watched >= AD_MIN_MS) {
      creditAdOnce();
    } else {
      adInProgress = false;
      watchNow1.disabled = false;
      showStatus("‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶∏‡¶Æ‡ßü ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶π‡ßü‡¶®‡¶ø‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§","error");
    }
    pageWasHidden = false;
  }
});

function playSdkAd(){
  try{
    if(typeof show_9789039 === "function"){
      try { show_9789039({ onClose: (completed)=>{ if(completed) creditAdOnce(); } }); } catch(_){}
      show_9789039();
    } else {
      setTimeout(()=>{ creditAdOnce(); }, AD_MIN_MS);
    }
  } catch(e){
    setTimeout(()=>{ creditAdOnce(); }, AD_MIN_MS);
  }
}

watchNow1.addEventListener('click', ()=>{
    if(state.dailyAdCount >= DAILY_LIMIT){ showStatus("Daily ad limit reached","error"); return;}
    if(adInProgress) return;
    adInProgress = true; adCredited = false; pageWasHidden = false; adStartTs = Date.now(); watchNow1.disabled = true;
    showStatus("Ad loading... Please watch till the end.","info");
    playSdkAd();
});

// ===== Sign-up =====
signupBtn.addEventListener('click', ()=>{
  if(state.totalAdCount >= SIGNUP_THRESHOLD && state.dailySignupCount < 1){
    state.dailySignupCount++;
    saveState(); updateUI();
    showStatus("Sign-up completed!","success");
  } else {
    showStatus("‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡ßß‡ß´‡¶ü‡¶ø Ad ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§","error");
  }
});

// ===== Platform select =====
uwolnBtn.addEventListener('click',()=>{
  selectedPlatform = 'Uwoln';
  uwolnBtn.classList.add('selected');
  updateUI();
});

// ===== Withdraw =====
mainWithdrawBtn.addEventListener('click',()=>{
  if(!selectedPlatform){showStatus("Please select a platform","error"); return;}
  if(state.balanceInCents<WITHDRAW_THRESHOLD){showStatus("Insufficient balance","error"); return;}
  state.balanceInCents=0; saveState(); updateUI();
  showStatus(`Withdrawal request sent to ${selectedPlatform}!`,"success");
});

// ===== Navigation =====
function showView(viewId){
  ['native-home-view','referral-view','uwoln-view'].forEach(v=>{
    document.getElementById(v).style.display='none';
  });
  document.getElementById(viewId).style.display='block';

  ['navNativeHome','navReferral','navUwoln'].forEach(b=>{
    document.getElementById(b).classList.remove('active');
  });
  if(viewId==='native-home-view') navNativeHome.classList.add('active');
  else if(viewId==='referral-view') navReferral.classList.add('active');
  else if(viewId==='uwoln-view') navUwoln.classList.add('active');
}

navNativeHome.addEventListener('click',()=>showView('native-home-view'));
navReferral.addEventListener('click',()=>showView('referral-view'));
navUwoln.addEventListener('click',()=>showView('uwoln-view'));

showView('native-home-view');
updateUI();
});
</script>
</body>
</html>
